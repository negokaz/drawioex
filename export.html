<!DOCTYPE html>
<html>
<head>
    <script>
    mxBasePath = 'node_modules/mxgraph/javascript/src';
    mxLoadResources = false;
    </script>
    <script src="node_modules/mxgraph/javascript/mxClient.js"></script>
    <script src="node_modules/pako/dist/pako.js"></script>
    <script>
    function bytesToString(bytes) {
        return String.fromCharCode.apply(null, bytes);
    }
    function decompress(data) {
        return decodeURIComponent(bytesToString(pako.inflateRaw(atob(data))));
    }
    function render(xml) {
        const xmlDoc = mxUtils.parseXml(xml);
    
        let diagrams = null;
        if (xmlDoc.documentElement.nodeName == 'mxfile') {
            diagrams = xmlDoc.documentElement.getElementsByTagName('diagram');
        } else {
            throw new Error('invalid XML');
        }

        for (let diagram of diagrams) {
            const xmlDoc = mxUtils.parseXml(decompress(mxUtils.getTextContent(diagram)));
            const graph = new mxGraph(document.querySelector('#graph'));
            const codec = new mxCodec(xmlDoc);
            codec.decode(xmlDoc.documentElement, graph.getModel());
            console.log(xmlDoc);
        }
    }
    </script>
</head>
<body>
    <div id="graph"></div>
</body>
</html>